document.addEventListener('DOMContentLoaded',function(){console.log('Morning Star Botanicals website loaded');initializeNavigation();initializeScrollEffects();initializeSmoothScroll();initializeEnhancedSmoothScroll();initializeFeaturedProducts();initializeBrandStoryAnimation();initializeProductsPage();initializeMobileOptimizations();initializeMicroInteractions();initializeParallaxEffects();initializeScrollAnimations();initializeLazyLoading();});function initializeMobileOptimizations(){const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 767;if (isMobile){document.body.classList.add('mobile-device');initializeTouchInteractions();optimizeImagesForMobile();initializeMobileScrollBehavior();preventInputZoom();console.log('Mobile optimizations initialized');}}function initializeTouchInteractions(){const buttons = document.querySelectorAll('.btn,.product-card__cta,.hero__cta,.story__cta');buttons.forEach(button =>{button.addEventListener('touchstart',function(){this.style.transform = 'scale(0.95)';this.style.transition = 'transform 0.1s ease';});button.addEventListener('touchend',function(){this.style.transform = 'scale(1)';});button.addEventListener('touchcancel',function(){this.style.transform = 'scale(1)';});});const productCards = document.querySelectorAll('.product-card');productCards.forEach(card =>{card.addEventListener('touchstart',function(){this.style.transform = 'scale(0.98)';this.style.transition = 'transform 0.1s ease';});card.addEventListener('touchend',function(){this.style.transform = 'scale(1)';});card.addEventListener('touchcancel',function(){this.style.transform = 'scale(1)';});});}function optimizeImagesForMobile(){const images = document.querySelectorAll('img');images.forEach(img =>{if (!img.hasAttribute('loading')){img.setAttribute('loading','lazy');}img.addEventListener('dragstart',function(e){e.preventDefault();});img.addEventListener('error',function(){this.style.opacity = '0.5';this.alt = 'Image not available';});});}function initializeMobileScrollBehavior(){let isScrolling = false;window.addEventListener('scroll',function(){if (!isScrolling){window.requestAnimationFrame(function(){const header = document.querySelector('.header');const scrollTop = window.pageYOffset;if (scrollTop > 50){header.classList.add('scrolled');}else{header.classList.remove('scrolled');}isScrolling = false;});isScrolling = true;}});window.addEventListener('orientationchange',function(){setTimeout(() =>{const vh = window.innerHeight * 0.01;document.documentElement.style.setProperty('--vh',`${vh}px`);},100);});const vh = window.innerHeight * 0.01;document.documentElement.style.setProperty('--vh',`${vh}px`);}function preventInputZoom(){const inputs = document.querySelectorAll('input,select,textarea');inputs.forEach(input =>{const computedStyle = window.getComputedStyle(input);const fontSize = parseFloat(computedStyle.fontSize);if (fontSize < 16){input.style.fontSize = '16px';}});}function initializeNavigation(){const navToggle = document.querySelector('.nav__toggle');const navMenu = document.querySelector('.nav__menu');const navLinks = document.querySelectorAll('.nav__link');if (navToggle && navMenu){navToggle.addEventListener('click',function(e){e.preventDefault();toggleMobileMenu();});navToggle.addEventListener('touchstart',function(e){e.preventDefault();this.style.transform = 'scale(0.95)';});navToggle.addEventListener('touchend',function(e){e.preventDefault();this.style.transform = 'scale(1)';toggleMobileMenu();});navLinks.forEach(link =>{link.addEventListener('click',function(){closeMobileMenu();});link.addEventListener('touchstart',function(){this.style.transform = 'scale(0.98)';});link.addEventListener('touchend',function(){this.style.transform = 'scale(1)';});});document.addEventListener('click',function(event){const isClickInsideNav = navToggle.contains(event.target) || navMenu.contains(event.target);if (!isClickInsideNav && navMenu.classList.contains('nav__menu--open')){closeMobileMenu();}});document.addEventListener('keydown',function(event){if (event.key === 'Escape' && navMenu.classList.contains('nav__menu--open')){closeMobileMenu();}});window.addEventListener('resize',function(){if (window.innerWidth > 767 && navMenu.classList.contains('nav__menu--open')){closeMobileMenu();}});window.addEventListener('orientationchange',function(){setTimeout(() =>{if (window.innerWidth > 767 && navMenu.classList.contains('nav__menu--open')){closeMobileMenu();}},100);});navMenu.addEventListener('touchmove',function(e){if (navMenu.classList.contains('nav__menu--open')){e.preventDefault();}});}console.log('Navigation initialized with mobile optimizations');}function toggleMobileMenu(){const navToggle = document.querySelector('.nav__toggle');const navMenu = document.querySelector('.nav__menu');if (navToggle && navMenu){navToggle.classList.toggle('nav__toggle--active');navMenu.classList.toggle('nav__menu--open');const isOpen = navMenu.classList.contains('nav__menu--open');navToggle.setAttribute('aria-expanded',isOpen);if (isOpen){document.body.style.overflow = 'hidden';}else{document.body.style.overflow = '';}}}function closeMobileMenu(){const navToggle = document.querySelector('.nav__toggle');const navMenu = document.querySelector('.nav__menu');if (navToggle && navMenu){navToggle.classList.remove('nav__toggle--active');navMenu.classList.remove('nav__menu--open');navToggle.setAttribute('aria-expanded','false');document.body.style.overflow = '';}}function initializeScrollEffects(){const header = document.querySelector('.header');if (header){let lastScrollTop = 0;window.addEventListener('scroll',function(){const scrollTop = window.pageYOffset || document.documentElement.scrollTop;if (scrollTop > 50){header.classList.add('scrolled');}else{header.classList.remove('scrolled');}lastScrollTop = scrollTop;});}}function initializeSmoothScroll(){const anchorLinks = document.querySelectorAll('a[href^="#"]');anchorLinks.forEach(link =>{link.addEventListener('click',function(e){const targetId = this.getAttribute('href');const targetElement = document.querySelector(targetId);if (targetElement){e.preventDefault();const headerHeight = document.querySelector('.header').offsetHeight;const targetPosition = targetElement.offsetTop - headerHeight - 20;window.scrollTo({top: targetPosition,behavior: 'smooth'});closeMobileMenu();}});});}const productsData = [{id: 'lavender-dreams',name: 'Lavender Dreams',description: 'A soothing blend of organic lavender and chamomile,perfect for evening relaxation and gentle cleansing.',ingredients: ['Organic Lavender','Chamomile','Shea Butter','Coconut Oil'],image: 'images/products/lavender-dreams-soap.jpg',featured: true,badge: 'Bestseller'},{id: 'eucalyptus-mint',name: 'Eucalyptus Mint',description: 'Invigorating eucalyptus and peppermint create a refreshing cleansing experience that awakens the senses.',ingredients: ['Eucalyptus Oil','Peppermint','Olive Oil','Cocoa Butter'],image: 'images/products/eucalyptus-mint-soap.jpg',featured: true,badge: 'Energizing'},{id: 'rose-garden',name: 'Rose Garden',description: 'Luxurious rose petals and geranium oil provide a romantic,moisturizing cleanse with a delicate floral scent.',ingredients: ['Rose Petals','Geranium Oil','Argan Oil','Goat Milk'],image: 'images/products/rose-garden-soap.jpg',featured: true,badge: 'Luxurious'},{id: 'oatmeal-honey',name: 'Oatmeal Honey',description: 'Gentle exfoliation meets deep moisturizing with colloidal oatmeal and raw honey for sensitive skin.',ingredients: ['Colloidal Oatmeal','Raw Honey','Almond Oil','Vanilla'],image: 'images/products/oatmeal-honey-soap.jpg',featured: false,badge: 'Gentle'},{id: 'tea-tree-charcoal',name: 'Tea Tree Charcoal',description: 'Purifying activated charcoal and tea tree oil work together to deeply cleanse and clarify problem skin.',ingredients: ['Tea Tree Oil','Activated Charcoal','Jojoba Oil','Clay'],image: 'images/products/tea-tree-charcoal-soap.jpg',featured: false,badge: 'Purifying'},{id: 'citrus-burst',name: 'Citrus Burst',description: 'Energizing blend of orange,lemon,and grapefruit oils creates an uplifting morning cleanse experience.',ingredients: ['Orange Oil','Lemon Oil','Grapefruit Oil','Sunflower Oil'],image: 'images/products/citrus-burst-soap.jpg',featured: false,badge: 'Uplifting'},{id: 'coconut-vanilla',name: 'Coconut Vanilla',description: 'Tropical coconut and warm vanilla create a creamy,moisturizing soap that transports you to paradise.',ingredients: ['Coconut Oil','Vanilla Extract','Cocoa Butter','Sweet Almond Oil'],image: 'images/products/coconut-vanilla-soap.jpg',featured: false,badge: 'Tropical'},{id: 'patchouli-sage',name: 'Patchouli Sage',description: 'Earthy patchouli and cleansing sage combine for a grounding,purifying cleanse with herbal notes.',ingredients: ['Patchouli Oil','Sage Extract','Hemp Seed Oil','Sea Salt'],image: 'images/products/patchouli-sage-soap.jpg',featured: false,badge: 'Earthy'},{id: 'lemongrass-mint',name: 'Lemongrass Mint',description: 'Fresh lemongrass and cooling mint provide an invigorating cleanse that refreshes and energizes.',ingredients: ['Lemongrass Oil','Spearmint','Avocado Oil','Green Tea Extract'],image: 'images/products/lemongrass-mint-soap.jpg',featured: false,badge: 'Fresh'}];const featuredProductsData = productsData.filter(product => product.featured);function initializeFeaturedProducts(){const productsGrid = document.getElementById('featured-products-grid');if (productsGrid){productsGrid.innerHTML = '';featuredProductsData.forEach((product,index) =>{const productCard = createProductCard(product,index);productsGrid.appendChild(productCard);});observeProductCards();console.log('Featured products initialized');}}function createProductCard(product,index){const card = document.createElement('article');card.className = 'product-card';card.style.animationDelay = `${index * 0.2}s`;card.setAttribute('role','article');card.setAttribute('aria-labelledby',`product-title-${product.id}`);card.setAttribute('tabindex','0');card.innerHTML = ` <div class="product-card__image-container"> <img src="${product.image}" alt="${product.name}handmade natural soap" class="product-card__image" onerror="this.src='data:image/svg+xml;base64,${createPlaceholderImage(product.name)}'"> <div class="product-card__badge" aria-label="${product.badge}product">${product.badge}</div> <div class="product-card__overlay" aria-hidden="true"> <div class="product-card__overlay-text">Handcrafted with natural ingredients</div> </div> </div> <div class="product-card__content"> <h3 class="product-card__title" id="product-title-${product.id}">${product.name}</h3> <p class="product-card__description">${product.description}</p> <div class="product-card__ingredients"> <div class="product-card__ingredients-title">Key Ingredients</div> <div class="product-card__ingredients-list">${product.ingredients.join(',')}</div> </div> <a href="products.html#${product.id}" class="product-card__cta" aria-describedby="product-title-${product.id}">Learn More</a> </div> `;card.addEventListener('mouseenter',function(){this.style.transform = 'translateY(-8px) scale(1.02)';});card.addEventListener('mouseleave',function(){this.style.transform = 'translateY(0) scale(1)';});card.addEventListener('keydown',function(e){if (e.key === 'Enter' || e.key === ' '){e.preventDefault();const cta = this.querySelector('.product-card__cta');if (cta){cta.click();}}});card.addEventListener('focus',function(){this.style.transform = 'translateY(-4px) scale(1.01)';this.style.outline = '3px solid var(--gold-accent)';this.style.outlineOffset = '2px';});card.addEventListener('blur',function(){this.style.transform = 'translateY(0) scale(1)';this.style.outline = 'none';});return card;}function createPlaceholderImage(productName){const svg = ` <svg width="400" height="300" xmlns="http: <defs> <linearGradient id="productGradient" x1="0%" y1="0%" x2="100%" y2="100%"> <stop offset="0%" style="stop-color:#7BA7A9;stop-opacity:1" /> <stop offset="100%" style="stop-color:#4A7C7E;stop-opacity:1" /> </linearGradient> </defs> <rect width="400" height="300" fill="url(#productGradient)"/> <text x="200" y="140" font-family="serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">${productName}</text> <text x="200" y="170" font-family="sans-serif" font-size="14" text-anchor="middle" fill="rgba(255,255,255,0.8)">Handcrafted Natural Soap</text> <circle cx="200" cy="200" r="20" fill="none" stroke="#D4AF37" stroke-width="2"/> <circle cx="200" cy="200" r="5" fill="#D4AF37"/> </svg> `;return btoa(svg);}function observeProductCards(){const cards = document.querySelectorAll('.product-card');if ('IntersectionObserver' in window){const observer = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){entry.target.style.animation = 'fadeInUp 0.8s ease-out forwards';observer.unobserve(entry.target);}});},{threshold: 0.1,rootMargin: '0px 0px -50px 0px'});cards.forEach(card =>{card.style.opacity = '0';card.style.transform = 'translateY(30px)';observer.observe(card);});}else{cards.forEach((card,index) =>{setTimeout(() =>{card.style.animation = 'fadeInUp 0.8s ease-out forwards';},index * 200);});}}function initializeBrandStoryAnimation(){const storySection = document.querySelector('.brand-story');const storyContent = document.querySelector('.story__content');const storyIcon = document.querySelector('.story__icon');const storyTitle = document.querySelector('.story__content .section__title');const storyText = document.querySelector('.story__text');const storySubtext = document.querySelector('.story__subtext');const storyCta = document.querySelector('.story__cta');if (storySection && 'IntersectionObserver' in window){const observer = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){setTimeout(() =>{if (storyIcon){storyIcon.style.animation = 'fadeInUp 0.8s ease-out forwards';}},100);setTimeout(() =>{if (storyTitle){storyTitle.style.animation = 'fadeInUp 0.8s ease-out forwards';}},300);setTimeout(() =>{if (storyText){storyText.style.animation = 'fadeInUp 0.8s ease-out forwards';}},500);setTimeout(() =>{if (storySubtext){storySubtext.style.animation = 'fadeInUp 0.8s ease-out forwards';}},700);setTimeout(() =>{if (storyCta){storyCta.style.animation = 'fadeInUp 0.8s ease-out forwards';}},900);observer.unobserve(entry.target);}});},{threshold: 0.2,rootMargin: '0px 0px -100px 0px'});[storyIcon,storyTitle,storyText,storySubtext,storyCta].forEach(element =>{if (element){element.style.opacity = '0';element.style.transform = 'translateY(30px)';}});observer.observe(storySection);}else{setTimeout(() =>{[storyIcon,storyTitle,storyText,storySubtext,storyCta].forEach((element,index) =>{if (element){setTimeout(() =>{element.style.animation = 'fadeInUp 0.8s ease-out forwards';},index * 200);}});},500);}console.log('Brand story animations initialized');}function initializeProductsPage(){const productsGrid = document.getElementById('products-grid');if (!productsGrid){return;}productsGrid.innerHTML = '';productsData.forEach((product,index) =>{const productCard = createProductCardForProductsPage(product,index);productsGrid.appendChild(productCard);});observeProductCardsOnProductsPage();initializeLazyLoading();setTimeout(() =>{testProductGridResponsiveness();},1000);console.log('Products page initialized with',productsData.length,'products');}function createProductCardForProductsPage(product,index){const card = document.createElement('article');card.className = 'product-card';card.id = product.id;card.style.animationDelay = `${index * 0.1}s`;card.setAttribute('role','article');card.setAttribute('aria-labelledby',`product-title-${product.id}`);card.setAttribute('tabindex','0');const placeholderUrl = `https: card.innerHTML = ` <div class="product-card__image-container"> <img class="product-card__image" data-src="${product.image}" src="${placeholderUrl}" alt="${product.name}handmade natural soap with ${product.ingredients.slice(0,2).join(' and ')}" loading="lazy" onerror="this.src='${placeholderUrl}'"> <div class="product-card__badge" aria-label="${product.badge}product">${product.badge}</div> <div class="product-card__overlay" aria-hidden="true"> <p class="product-card__overlay-text">Made with natural botanical ingredients</p> </div> </div> <div class="product-card__content"> <h3 class="product-card__title" id="product-title-${product.id}">${product.name}</h3> <p class="product-card__description">${product.description}</p> <div class="product-card__ingredients"> <h4 class="product-card__ingredients-title">Key Ingredients</h4> <p class="product-card__ingredients-list">${product.ingredients.join(',')}</p> </div> <a href="#${product.id}" class="product-card__cta" aria-describedby="product-title-${product.id}">Learn More</a> </div> `;card.addEventListener('mouseenter',function(){this.style.transform = 'translateY(-8px)';this.style.transition = 'all 0.3s ease';});card.addEventListener('mouseleave',function(){this.style.transform = 'translateY(0)';});card.addEventListener('click',function(e){if (e.target.tagName !== 'A'){const cta = this.querySelector('.product-card__cta');if (cta){cta.click();}}});card.addEventListener('keydown',function(e){if (e.key === 'Enter' || e.key === ' '){e.preventDefault();const cta = this.querySelector('.product-card__cta');if (cta){cta.click();}}});card.addEventListener('focus',function(){this.style.transform = 'translateY(-4px)';this.style.outline = '3px solid var(--gold-accent)';this.style.outlineOffset = '2px';this.setAttribute('aria-live','polite');this.setAttribute('aria-atomic','true');});card.addEventListener('blur',function(){this.style.transform = 'translateY(0)';this.style.outline = 'none';this.removeAttribute('aria-live');this.removeAttribute('aria-atomic');});return card;}function getColorFromBadge(badge){const colorMap ={'Bestseller': '4A7C7E','Energizing': '7BA7A9','Luxurious': 'D4AF37','Gentle': 'B8941F','Purifying': '4A7C7E','Uplifting': 'D4AF37','Tropical': '7BA7A9','Earthy': '4A7C7E','Fresh': '7BA7A9'};return colorMap[badge] || '4A7C7E';}function observeProductCardsOnProductsPage(){const cards = document.querySelectorAll('.product-card');if ('IntersectionObserver' in window){const observer = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){entry.target.style.opacity = '1';entry.target.style.transform = 'translateY(0)';entry.target.style.transition = 'all 0.6s ease-out';observer.unobserve(entry.target);}});},{threshold: 0.1,rootMargin: '0px 0px -50px 0px'});cards.forEach((card,index) =>{card.style.opacity = '0';card.style.transform = 'translateY(30px)';card.style.transition = 'none';setTimeout(() =>{observer.observe(card);},index * 50);});}else{cards.forEach((card,index) =>{setTimeout(() =>{card.style.opacity = '1';card.style.transform = 'translateY(0)';card.style.transition = 'all 0.6s ease-out';},index * 100);});}}function initializeLazyLoading(){const images = document.querySelectorAll('img[data-src]');if ('IntersectionObserver' in window){const imageObserver = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){const img = entry.target;const src = img.getAttribute('data-src');if (src){img.classList.add('loading');const newImg = new Image();newImg.onload = function(){img.src = src;img.classList.remove('loading');img.classList.add('loaded');if (document.body.classList.contains('mobile-device')){img.style.opacity = '0';img.style.transition = 'opacity 0.3s ease';setTimeout(() =>{img.style.opacity = '1';},50);}};newImg.onerror = function(){img.classList.remove('loading');img.classList.add('error');};newImg.src = src;img.removeAttribute('data-src');imageObserver.unobserve(img);}}});},{threshold: 0.1,rootMargin: '50px 0px'});images.forEach(img =>{imageObserver.observe(img);});}else{images.forEach(img =>{const src = img.getAttribute('data-src');if (src){img.src = src;img.removeAttribute('data-src');}});}const allImages = document.querySelectorAll('img:not([loading])');allImages.forEach(img =>{img.setAttribute('loading','lazy');});console.log('Lazy loading initialized for',images.length,'images');}function initializeEnhancedSmoothScroll(){const anchorLinks = document.querySelectorAll('a[href^="#"],.section-nav__link');anchorLinks.forEach(link =>{link.addEventListener('click',function(e){const targetId = this.getAttribute('href');if (targetId === '#' || !targetId) return;const targetElement = document.querySelector(targetId);if (targetElement){e.preventDefault();const header = document.querySelector('.header');const headerHeight = header ? header.offsetHeight : 0;const extraPadding = 20;const targetPosition = targetElement.offsetTop - headerHeight - extraPadding;smoothScrollTo(targetPosition,800);closeMobileMenu();setTimeout(() =>{history.pushState(null,null,targetId);},800);}});});if (window.location.hash){setTimeout(() =>{const targetElement = document.querySelector(window.location.hash);if (targetElement){const header = document.querySelector('.header');const headerHeight = header ? header.offsetHeight : 0;const targetPosition = targetElement.offsetTop - headerHeight - 20;smoothScrollTo(targetPosition,600);}},100);}}function smoothScrollTo(targetPosition,duration = 600){const startPosition = window.pageYOffset;const distance = targetPosition - startPosition;let startTime = null;function easeInOutCubic(t){return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;}function animation(currentTime){if (startTime === null) startTime = currentTime;const timeElapsed = currentTime - startTime;const progress = Math.min(timeElapsed / duration,1);const ease = easeInOutCubic(progress);window.scrollTo(0,startPosition + distance * ease);if (timeElapsed < duration){requestAnimationFrame(animation);}}requestAnimationFrame(animation);}function initializeMicroInteractions(){const buttons = document.querySelectorAll('.btn,.product-card__cta,.hero__cta,.story__cta,.about-cta__btn');buttons.forEach(button =>{button.addEventListener('mouseenter',function(){this.style.transform = 'translateY(-2px) scale(1.02)';this.style.transition = 'all 0.2s ease';this.style.boxShadow = '0 8px 25px rgba(74,124,126,0.3)';});button.addEventListener('mouseleave',function(){this.style.transform = 'translateY(0) scale(1)';this.style.boxShadow = '';});button.addEventListener('mousedown',function(){this.style.transform = 'translateY(0) scale(0.98)';});button.addEventListener('mouseup',function(){this.style.transform = 'translateY(-2px) scale(1.02)';});});const productCards = document.querySelectorAll('.product-card');productCards.forEach(card =>{let hoverTimeout;card.addEventListener('mouseenter',function(){clearTimeout(hoverTimeout);this.style.transform = 'translateY(-8px) scale(1.02)';this.style.transition = 'all 0.3s cubic-bezier(0.4,0,0.2,1)';this.style.boxShadow = '0 20px 40px rgba(74,124,126,0.15)';const overlay = this.querySelector('.product-card__overlay');if (overlay){overlay.style.opacity = '1';overlay.style.transform = 'translateY(0)';}const badge = this.querySelector('.product-card__badge');if (badge){badge.style.transform = 'scale(1.1) rotate(-2deg)';}});card.addEventListener('mouseleave',function(){hoverTimeout = setTimeout(() =>{this.style.transform = 'translateY(0) scale(1)';this.style.boxShadow = '';const overlay = this.querySelector('.product-card__overlay');if (overlay){overlay.style.opacity = '0';overlay.style.transform = 'translateY(10px)';}const badge = this.querySelector('.product-card__badge');if (badge){badge.style.transform = 'scale(1) rotate(0deg)';}},50);});});const logos = document.querySelectorAll('.logo,.hero__logo-img');logos.forEach(logo =>{logo.addEventListener('mouseenter',function(){this.style.transform = 'scale(1.05) rotate(2deg)';this.style.transition = 'all 0.3s ease';});logo.addEventListener('mouseleave',function(){this.style.transform = 'scale(1) rotate(0deg)';});});const navLinks = document.querySelectorAll('.nav__link,.section-nav__link');navLinks.forEach(link =>{link.addEventListener('mouseenter',function(){this.style.transform = 'translateY(-1px)';this.style.transition = 'all 0.2s ease';});link.addEventListener('mouseleave',function(){this.style.transform = 'translateY(0)';});});const footerLinks = document.querySelectorAll('.footer a,.about-cta__link');footerLinks.forEach(link =>{link.addEventListener('mouseenter',function(){this.style.color = 'var(--gold-accent)';this.style.transform = 'translateX(3px)';this.style.transition = 'all 0.2s ease';});link.addEventListener('mouseleave',function(){this.style.color = '';this.style.transform = 'translateX(0)';});});console.log('Micro-interactions initialized');}function initializeParallaxEffects(){const parallaxElements = document.querySelectorAll('.hero,.brand-story,.story__icon');if (parallaxElements.length === 0) return;let ticking = false;function updateParallax(){const scrolled = window.pageYOffset;const rate = scrolled * -0.5;parallaxElements.forEach(element =>{if (element.classList.contains('hero')){element.style.transform = `translateY(${rate * 0.3}px)`;}else if (element.classList.contains('story__icon')){element.style.transform = `translateY(${rate * 0.1}px) rotate(${scrolled * 0.05}deg)`;}});ticking = false;}function requestTick(){if (!ticking){requestAnimationFrame(updateParallax);ticking = true;}}if (window.innerWidth > 768){window.addEventListener('scroll',requestTick);}console.log('Parallax effects initialized');}function initializeScrollAnimations(){const animatedElements = document.querySelectorAll('.section__title,.story__text,.process__step,.story__value');if ('IntersectionObserver' in window){const animationObserver = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){entry.target.classList.add('animate-in');animationObserver.unobserve(entry.target);}});},{threshold: 0.1,rootMargin: '0px 0px -50px 0px'});animatedElements.forEach(element =>{element.classList.add('animate-ready');animationObserver.observe(element);});}console.log('Scroll animations initialized');}function testProductGridResponsiveness(){const grid = document.getElementById('products-grid');if (!grid) return;const breakpoints = [{width: 320,expected: 1},{width: 768,expected: 2},{width: 1024,expected: 3},{width: 1200,expected: 3}];console.log('Testing product grid responsiveness...');breakpoints.forEach(bp =>{const computedStyle = window.getComputedStyle(grid);const gridColumns = computedStyle.getPropertyValue('grid-template-columns');const columnCount = gridColumns.split(' ').length;console.log(`At ${bp.width}px: ${columnCount}columns (expected: ${bp.expected})`);});}function initializeAboutPage(){if (!document.body.classList.contains('about-page') && !window.location.pathname.includes('about')){return;}initializeAboutNavigation();initializeAboutAnimations();initializeAboutScrollSpy();console.log('About page functionality initialized');}function initializeAboutNavigation(){const sectionNavLinks = document.querySelectorAll('.section-nav__link');const aboutSections = document.querySelectorAll('#story,#process');sectionNavLinks.forEach(link =>{link.addEventListener('click',function(e){e.preventDefault();const targetId = this.getAttribute('href').substring(1);const targetSection = document.getElementById(targetId);if (targetSection){const headerHeight = document.querySelector('.header').offsetHeight;const targetPosition = targetSection.offsetTop - headerHeight - 20;window.scrollTo({top: targetPosition,behavior: 'smooth'});updateActiveSectionNav(this);closeMobileMenu();setTimeout(() =>{targetSection.focus();targetSection.setAttribute('tabindex','-1');},500);}});});sectionNavLinks.forEach(link =>{link.addEventListener('keydown',function(e){if (e.key === 'Enter' || e.key === ' '){e.preventDefault();this.click();}});});}function updateActiveSectionNav(activeLink){const sectionNavLinks = document.querySelectorAll('.section-nav__link');sectionNavLinks.forEach(link =>{link.classList.remove('section-nav__link--active');link.setAttribute('aria-current','false');});activeLink.classList.add('section-nav__link--active');activeLink.setAttribute('aria-current','page');}function initializeAboutAnimations(){const storySection = document.getElementById('story');const processSection = document.getElementById('process');const ctaSection = document.querySelector('.about-cta');const sections = [storySection,processSection,ctaSection].filter(Boolean);if ('IntersectionObserver' in window){const sectionObserver = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){entry.target.classList.add('section-animated');animateSectionContent(entry.target);}});},{threshold: 0.1,rootMargin: '0px 0px -100px 0px'});sections.forEach(section =>{sectionObserver.observe(section);});}animateStoryValues();animateProcessSteps();animateCtaElements();}function animateSectionContent(section){const animatableElements = section.querySelectorAll( '.story__header,.story__main,.story__values,' + '.process__header,.process__steps,.process__commitment,' + '.about-cta__content' );animatableElements.forEach((element,index) =>{setTimeout(() =>{element.style.opacity = '1';element.style.transform = 'translateY(0)';element.style.transition = 'all 0.8s ease-out';},index * 200);});}function animateStoryValues(){const storyValues = document.querySelectorAll('.story__value');if ('IntersectionObserver' in window){const valueObserver = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){const values = entry.target.querySelectorAll('.story__value');values.forEach((value,index) =>{setTimeout(() =>{value.style.opacity = '1';value.style.transform = 'translateY(0) scale(1)';value.style.transition = 'all 0.6s ease-out';},index * 150);});valueObserver.unobserve(entry.target);}});},{threshold: 0.3});const storyValuesContainer = document.querySelector('.story__values');if (storyValuesContainer){storyValues.forEach(value =>{value.style.opacity = '0';value.style.transform = 'translateY(30px) scale(0.9)';});valueObserver.observe(storyValuesContainer);}}}function animateProcessSteps(){const processSteps = document.querySelectorAll('.process__step');if ('IntersectionObserver' in window){const stepObserver = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){entry.target.style.opacity = '1';entry.target.style.transform = 'translateX(0)';entry.target.style.transition = 'all 0.8s ease-out';stepObserver.unobserve(entry.target);}});},{threshold: 0.2,rootMargin: '0px 0px -50px 0px'});processSteps.forEach((step,index) =>{step.style.opacity = '0';step.style.transform = index % 2 === 0 ? 'translateX(-50px)' : 'translateX(50px)';setTimeout(() =>{stepObserver.observe(step);},index * 100);});}}function animateCtaElements(){const ctaElements = document.querySelectorAll( '.about-cta__title,.about-cta__text,.about-cta__actions,.about-cta__links' );if ('IntersectionObserver' in window){const ctaObserver = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){const elements = entry.target.querySelectorAll( '.about-cta__title,.about-cta__text,.about-cta__actions,.about-cta__links' );elements.forEach((element,index) =>{setTimeout(() =>{element.style.opacity = '1';element.style.transform = 'translateY(0)';element.style.transition = 'all 0.6s ease-out';},index * 200);});ctaObserver.unobserve(entry.target);}});},{threshold: 0.2});const ctaSection = document.querySelector('.about-cta');if (ctaSection){ctaElements.forEach(element =>{element.style.opacity = '0';element.style.transform = 'translateY(30px)';});ctaObserver.observe(ctaSection);}}}function initializeAboutScrollSpy(){const sections = document.querySelectorAll('#story,#process');const navLinks = document.querySelectorAll('.section-nav__link');if ('IntersectionObserver' in window && sections.length > 0){const scrollSpyObserver = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){const sectionId = entry.target.id;const correspondingLink = document.querySelector(`.section-nav__link[href="#${sectionId}"]`);if (correspondingLink){updateActiveSectionNav(correspondingLink);}}});},{threshold: 0.3,rootMargin: '-100px 0px -50% 0px'});sections.forEach(section =>{scrollSpyObserver.observe(section);});}}function smoothScrollToElement(targetElement,offset = 0){if (!targetElement) return;const headerHeight = document.querySelector('.header').offsetHeight;const targetPosition = targetElement.offsetTop - headerHeight - offset;const startPosition = window.pageYOffset;const distance = targetPosition - startPosition;const duration = Math.min(Math.abs(distance) / 2,1000);let start = null;function animation(currentTime){if (start === null) start = currentTime;const timeElapsed = currentTime - start;const progress = Math.min(timeElapsed / duration,1);const easeOutCubic = 1 - Math.pow(1 - progress,3);window.scrollTo(0,startPosition + distance * easeOutCubic);if (timeElapsed < duration){requestAnimationFrame(animation);}else{targetElement.focus();targetElement.setAttribute('tabindex','-1');}}requestAnimationFrame(animation);}function testAboutPageConsistency(){console.log('Testing about page content readability and visual consistency...');const textElements = document.querySelectorAll('p,h1,h2,h3,h4,h5,h6,.story__tagline,.process__intro');const contrastIssues = [];textElements.forEach(element =>{const styles = window.getComputedStyle(element);const color = styles.color;const backgroundColor = styles.backgroundColor;if (color && backgroundColor && backgroundColor !== 'rgba(0,0,0,0)'){console.log(`Element: ${element.tagName},Color: ${color},Background: ${backgroundColor}`);}});const breakpoints = [320,768,1024,1200];console.log('Testing responsive breakpoints:',breakpoints);const sectionNavLinks = document.querySelectorAll('.section-nav__link');const aboutSections = document.querySelectorAll('#story,#process');console.log(`Section navigation: ${sectionNavLinks.length}links,${aboutSections.length}sections`);const focusableElements = document.querySelectorAll( 'a,button,input,textarea,select,[tabindex]:not([tabindex="-1"])' );console.log(`Focusable elements: ${focusableElements.length}`);const images = document.querySelectorAll('img');const imagesWithoutAlt = Array.from(images).filter(img => !img.alt || img.alt.trim() === '');if (imagesWithoutAlt.length > 0){console.warn(`Images without alt text: ${imagesWithoutAlt.length}`);}console.log('About page consistency test completed');}document.addEventListener('DOMContentLoaded',function(){initializeAboutPage();if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'){setTimeout(testAboutPageConsistency,2000);}});function initializeMobilePerformanceOptimizations(){if (!document.body.classList.contains('mobile-device')){return;}let scrollTimeout;const originalScrollHandler = window.onscroll;window.addEventListener('scroll',function(){if (scrollTimeout){clearTimeout(scrollTimeout);}scrollTimeout = setTimeout(() =>{if (originalScrollHandler){originalScrollHandler();}},16);},{passive: true});document.addEventListener('touchstart',function(){},{passive: true});const criticalImages = document.querySelectorAll('.hero__logo-img,.logo');criticalImages.forEach(img =>{const link = document.createElement('link');link.rel = 'preload';link.as = 'image';link.href = img.src;document.head.appendChild(link);});if ('performance' in window && 'getEntriesByType' in performance){window.addEventListener('load',function(){setTimeout(() =>{const navigation = performance.getEntriesByType('navigation')[0];const loadTime = navigation.loadEventEnd - navigation.loadEventStart;console.log('Mobile page load time:',loadTime + 'ms');if (loadTime > 3000){console.warn('Mobile page load time is slow:',loadTime + 'ms');}},0);});}if ('connection' in navigator){const connection = navigator.connection;if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g'){document.body.classList.add('slow-connection');const style = document.createElement('style');style.textContent = ` .slow-connection *{animation: none !important;transition: none !important;}.slow-connection .hero{background: var(--primary-teal) !important;}`;document.head.appendChild(style);}}console.log('Mobile performance optimizations initialized');}document.addEventListener('DOMContentLoaded',function(){setTimeout(initializeMobilePerformanceOptimizations,100);});document.addEventListener('visibilitychange',function(){if (document.body.classList.contains('mobile-device')){if (document.hidden){document.body.classList.add('page-hidden');}else{document.body.classList.remove('page-hidden');}}});const hiddenStateStyle = document.createElement('style');hiddenStateStyle.textContent = ` .page-hidden *{animation-play-state: paused !important;}`;document.head.appendChild(hiddenStateStyle);